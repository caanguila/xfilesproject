<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://java.sun.com/jsf/passthrough">

    <ui:composition template="templates/creatively-form.xhtml">

        <ui:param name="pageTitle" value="Log in Page"/>
        <ui:param name="webSiteTitle" value="X Files"/>

        <ui:define name="submenu">
            <ul>
                <li class="selected"><a href="#">Sign In</a></li>
                <li><a href="#{request.contextPath}/faces/recover.xhtml">Recover Password</a></li>
                <li><a href="#{request.contextPath}/faces/registration.xhtml">Registration Form</a></li>
            </ul>
        </ui:define>

        <ui:define name="sidebar">
            <h3>See Also</h3>
            <ul class="categories">
                <li><a href="#{request.contextPath}/faces/contacts.xhtml">Contact Us</a></li>
                <li><a href="#{request.contextPath}/faces/terms.xhtml">Terms of Use</a></li>
                <li><a href="#{request.contextPath}/faces/faq.xhtml">FAQ</a></li>
                <li><a href="#{request.contextPath}/faces/tutorial.xhtml">Tutorial</a></li>
            </ul>	
        </ui:define>

        <ui:define name="content">
            <div id="login_form_container">
                <h:form id="login_form" prependId="false"> 
                    <p><strong>Login Form</strong></p>
                    <h:messages id="messages" title="Errors" showDetail="true"
                                style="margin-left: 0; list-style-type: none;" class="message"
                                errorClass="message_bad" infoClass="message_good"
                                warnClass="message_info" fatalClass="message_bad">
                    </h:messages>
                    <table style="width: 500px; vertical-align: central;">
                        <tr>
                            <td><label for="emailsignup" data-icon="e" >Your email</label></td>
                            <td><h:inputText id="login_email" class="input-large" p:placeholder="mysupermail@mail.com" value="#{loginBean.login}"/></td> 
                        </tr>
                        <tr> 
                            <td><label for="passwordsignup" data-icon="p">Your password </label></td>
                            <td><h:inputSecret id="login_password" class="input-large" p:placeholder="eg. X8df!90EO" value="#{loginBean.password}"/></td>
                        </tr>
                        <tr> 
                            <td>  
                                Forgot password ?
                                <a href="#{request.contextPath}/faces/recover.xhtml"> Recovery page </a>
                            </td>
                            <td style="text-align: right;" class="input-large">
                                <h:commandLink class="button_green" style="text-decoration: none;" value="Sign in!" actionListener="#{loginBean.loginAction}">
                                    <f:ajax execute="@form" render="@form" onevent="handleLogin"/>
                                </h:commandLink>
                            </td>
                        </tr>
                    </table>
                    <h:inputHidden id="login_status" value="#{loginBean.loginStatus}"/>
                </h:form>
                <script type="text/javascript">
                        function handleLogin(e) {
                            if(e.status == 'success') {
                                var status = $('#login_status').val();
                                if(status == 'ok') {
                                    window.location = '#{request.contextPath}/faces/cabinet/home.xhtml';
                                }
                            }
                        }
                    </script>
            </div>
        </ui:define>
        
        <ui:define name="testimonials">
            <li>
                <q>Maecenas ut lacinia lorem. Nulla lacinia interdum porttitor. Curabitur id nisi elit, in pharetra est.</q>
                <span class="author">John Doe</span>
            </li>
            <li>
                <q>Fusce rutrum rutrum leo, congue semper eros ornare a. Quisque id orci dapibus mauris volutpat accumsan.</q>
                <span class="author">John Smith</span>
            </li>
        </ui:define>

        <ui:define name="twitter">
            <ul id="twitter"></ul>
        </ui:define>

        <ui:define name="list">
            <li>
                <h3><span>1</span> Lorem ipsum dolor sit amet</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer ut ipsum dui, id egestas sapien.</p>
            </li>
            <li>
                <h3><span>2</span> In consectetur nunc quis massa</h3>
                <p>In consectetur nunc quis massa pharetra eu elementum ante commodo. Curabitur nulla ligula, pretium fermentum accumsan at.</p>
            </li>
        </ui:define>

    </ui:composition>

</html>